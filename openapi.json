{"openapi":"3.1.0","info":{"title":"DataSink API","description":"API for DataSink","version":"0.1.0"},"paths":{"/":{"get":{"tags":["root"],"summary":"Read Root","operationId":"read_root","responses":{"200":{"description":"A service to throw in anything, but a kitchen sink!","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReadRootResponse"}}}}}}},"/health":{"get":{"tags":["root"],"summary":"Health Check","operationId":"health_check","responses":{"200":{"description":"Health check","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheckResponse"}}}}}}},"/models":{"get":{"tags":["embeddings"],"summary":"Get Models","operationId":"get_models","responses":{"200":{"description":"List of available models","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/EmbeddingModel"},"type":"array","title":"Response 200 Get Models"}}}}}},"post":{"tags":["embeddings"],"summary":"Create Model","operationId":"create_model","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmbeddingModel"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"201":{"description":"Model created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmbeddingModel"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBasic":[]}]}},"/embed":{"post":{"tags":["embeddings"],"summary":"Create Embedding","operationId":"create_embedding","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmbeddingRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"201":{"description":"Embedding created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmbeddingResponse"}}}},"404":{"description":"Model not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModelNotFoundResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBasic":[]}]}},"/collections":{"get":{"tags":["collections"],"summary":"Get Collections","operationId":"get_collections","responses":{"200":{"description":"List of available collections","content":{"application/json":{"schema":{"items":{"anyOf":[{"$ref":"#/components/schemas/CollectionInfo"},{"$ref":"#/components/schemas/QdrantCollectionInfo"}]},"type":"array","title":"Response 200 Get Collections"}}}}},"security":[{"HTTPBasic":[]}]},"post":{"tags":["collections"],"summary":"Create Collection","operationId":"create_collection","requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/CollectionInfo"},{"$ref":"#/components/schemas/QdrantCollectionInfo"}],"title":"Collection Info"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"201":{"description":"Collection created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QdrantCollectionInfo"}}}},"400":{"description":"Unsupported collection type","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnsupportedCollectionTypeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBasic":[]}]}},"/collections/{collection_id}":{"patch":{"tags":["collections"],"summary":"Update Collection","operationId":"update_collection","security":[{"HTTPBasic":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","title":"Collection Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PartialCollectionInfo"}}}},"responses":{"200":{"description":"Collection updated","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/QdrantCollectionInfo"},{"type":"object","additionalProperties":{"type":"string"}}],"title":"Response 200 Update Collection"}}}},"404":{"description":"Collection not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionNotFoundResponse"}}}},"400":{"description":"User error","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/UnsupportedCollectionTypeResponse"},{"$ref":"#/components/schemas/QdrantCredentialsInvalid"}],"title":"Response 400 Update Collection"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["collections"],"summary":"Delete Collection","operationId":"delete_collection","security":[{"HTTPBasic":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","title":"Collection Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"204":{"description":"Collection deleted"},"404":{"description":"Collection not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionNotFoundResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["collections"],"summary":"Get Collection","operationId":"get_collection","security":[{"HTTPBasic":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","title":"Collection Id"}}],"responses":{"200":{"description":"Collection info","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/CollectionInfo"},{"$ref":"#/components/schemas/QdrantCollectionInfo"}],"title":"Response 200 Get Collection"}}}},"404":{"description":"Collection not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionNotFoundResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/collections/{collection_id}/query":{"post":{"tags":["collections"],"summary":"Query","operationId":"query","security":[{"HTTPBasic":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","title":"Collection Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryRequest"}}}},"responses":{"200":{"description":"Query response","content":{"application/json":{"schema":{"type":"object","title":"Response 200 Query"}}}},"404":{"description":"Collection not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionNotFoundResponse"}}}},"400":{"description":"Unsupported collection type","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnsupportedCollectionTypeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/collections/{collection_id}/entities":{"get":{"tags":["collections"],"summary":"Get Collection Entities List","operationId":"get_collection_entities_list","security":[{"HTTPBasic":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","title":"Collection Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Query response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionEntityListResponse"}}}},"404":{"description":"Collection not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionNotFoundResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["collections"],"summary":"Create Collection Entity","operationId":"create_collection_entity","security":[{"HTTPBasic":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","title":"Collection Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionEntity"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"201":{"description":"Entity created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionEntityListResponse"}}}},"404":{"description":"Collection not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionNotFoundResponse"}}}},"409":{"description":"Entity with id already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionEntityAlreadyExistsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/collections/{collection_id}/entities/{entity_id}":{"get":{"tags":["collections"],"summary":"Get Collection Entity","operationId":"get_collection_entity","security":[{"HTTPBasic":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","title":"Collection Id"}},{"name":"entity_id","in":"path","required":true,"schema":{"type":"integer","title":"Entity Id"}}],"responses":{"200":{"description":"Query response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionEntityResponse"}}}},"404":{"description":"Collection or collection entity not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionOrCollectionEntityNotFoundResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["collections"],"summary":"Update Collection Entity","operationId":"update_collection_entity","security":[{"HTTPBasic":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","title":"Collection Id"}},{"name":"entity_id","in":"path","required":true,"schema":{"type":"integer","title":"Entity Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionEntity"}}}},"responses":{"200":{"description":"Entity updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionEntityResponse"}}}},"404":{"description":"Collection or collection entity not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionOrCollectionEntityNotFoundResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["collections"],"summary":"Delete Collection Entity","operationId":"delete_collection_entity","security":[{"HTTPBasic":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","title":"Collection Id"}},{"name":"entity_id","in":"path","required":true,"schema":{"type":"integer","title":"Entity Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"204":{"description":"Entity deleted"},"404":{"description":"Collection not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionNotFoundResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/collections/{collection_id}/data":{"post":{"tags":["collections"],"summary":"Add Data","operationId":"add_data","security":[{"HTTPBasic":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","title":"Collection Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"anyOf":[{"type":"array","items":{"$ref":"#/components/schemas/DataPoint"}},{"$ref":"#/components/schemas/DataPoint"}],"title":"Data"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"201":{"description":"Data added","content":{"application/json":{"schema":{"type":"object","title":"Response 201 Add Data"}}}},"404":{"description":"Collection not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionNotFoundResponse"}}}},"400":{"description":"Unsupported collection type","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnsupportedCollectionTypeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"CollectionEntity":{"properties":{"input":{"type":"string","title":"Input"},"payload":{"type":"object","title":"Payload"},"id":{"anyOf":[{"type":"integer"},{"type":"string"},{"type":"string","format":"uuid"}],"title":"Id"}},"type":"object","required":["input","payload","id"],"title":"CollectionEntity"},"CollectionEntityAlreadyExistsResponse":{"properties":{"detail":{"type":"string","title":"Detail","default":"Collection entity with this id already exists"}},"type":"object","title":"CollectionEntityAlreadyExistsResponse"},"CollectionEntityListResponse":{"properties":{"results":{"items":{"$ref":"#/components/schemas/CollectionEntityResponse"},"type":"array","title":"Results"},"count":{"type":"integer","title":"Count"}},"type":"object","required":["results","count"],"title":"CollectionEntityListResponse"},"CollectionEntityResponse":{"properties":{"id":{"anyOf":[{"type":"integer"},{"type":"string"},{"type":"string","format":"uuid"}],"title":"Id"},"payload":{"type":"object","title":"Payload"}},"type":"object","required":["id","payload"],"title":"CollectionEntityResponse"},"CollectionInfo":{"properties":{"id":{"anyOf":[{"type":"integer"},{"type":"string"},{"type":"string","format":"uuid"},{"type":"null"}],"title":"Id"},"name":{"type":"string","title":"Name"},"embedding_model":{"$ref":"#/components/schemas/EmbeddingModel"},"collection_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Collection Id"},"metadata":{"anyOf":[{"type":"object"},{"$ref":"#/components/schemas/QdrantCollectionMetadata"}],"title":"Metadata"},"owner":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Owner"},"collection_type":{"allOf":[{"$ref":"#/components/schemas/CollectionType"}],"default":"qdrant"},"status":{"allOf":[{"$ref":"#/components/schemas/CollectionStatus"}],"default":"undefined"}},"type":"object","required":["name","embedding_model"],"title":"CollectionInfo"},"CollectionNotFoundResponse":{"properties":{"detail":{"type":"string","title":"Detail","default":"Collection not found"}},"type":"object","title":"CollectionNotFoundResponse"},"CollectionOrCollectionEntityNotFoundResponse":{"properties":{"detail":{"type":"string","title":"Detail","default":"Collection or collection entity not found"}},"type":"object","title":"CollectionOrCollectionEntityNotFoundResponse"},"CollectionStatus":{"type":"string","enum":["undefined","created","ready","deleted","error"],"title":"CollectionStatus"},"CollectionType":{"type":"string","enum":["qdrant","unknown"],"title":"CollectionType"},"DataPoint":{"properties":{"input":{"type":"string","title":"Input"},"payload":{"type":"object","title":"Payload"},"id":{"anyOf":[{"type":"integer"},{"type":"string"},{"type":"string","format":"uuid"}],"title":"Id"}},"type":"object","required":["input","payload"],"title":"DataPoint"},"DistanceMethod":{"type":"string","enum":["Cosine","Euclidean","Dot","Manhattan"],"title":"DistanceMethod"},"EmbeddingModel":{"properties":{"id":{"anyOf":[{"type":"integer"},{"type":"string"},{"type":"string","format":"uuid"}],"title":"Id"},"name":{"type":"string","title":"Name"},"version":{"type":"string","title":"Version","default":"0.0.1"},"library":{"type":"string","title":"Library","default":"transformers"},"loaded":{"type":"boolean","title":"Loaded","default":false},"eb_model":{"anyOf":[{},{"type":"null"}],"title":"Eb Model"},"tokenizer":{"anyOf":[{},{"type":"null"}],"title":"Tokenizer"}},"type":"object","required":["name"],"title":"EmbeddingModel"},"EmbeddingRequest":{"properties":{"text":{"anyOf":[{"type":"string"},{"items":{"type":"string"},"type":"array"}],"title":"Text"},"eb_model_name":{"type":"string","title":"Eb Model Name"},"eb_model_version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Eb Model Version"}},"type":"object","required":["text","eb_model_name"],"title":"EmbeddingRequest"},"EmbeddingResponse":{"properties":{"embeddings":{"title":"Embeddings"},"eb_model_name":{"type":"string","title":"Eb Model Name"},"eb_model_version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Eb Model Version"}},"type":"object","required":["embeddings","eb_model_name"],"title":"EmbeddingResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthCheckResponse":{"properties":{"status":{"type":"string","title":"Status","default":"ok"}},"type":"object","title":"HealthCheckResponse"},"ModelNotFoundResponse":{"properties":{"detail":{"type":"string","title":"Detail","default":"Model not found"}},"type":"object","title":"ModelNotFoundResponse"},"PartialCollectionInfo":{"properties":{"id":{"anyOf":[{"type":"integer"},{"type":"string"},{"type":"string","format":"uuid"},{"type":"null"}],"title":"Id"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"embedding_model":{"anyOf":[{"$ref":"#/components/schemas/PartialEmbeddingModel"},{"type":"null"}]},"collection_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Collection Id"},"metadata":{"anyOf":[{"type":"object"},{"$ref":"#/components/schemas/QdrantCollectionMetadata"},{"type":"null"}],"title":"Metadata"},"owner":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Owner"},"collection_type":{"anyOf":[{"$ref":"#/components/schemas/CollectionType"},{"type":"null"}]},"status":{"anyOf":[{"$ref":"#/components/schemas/CollectionStatus"},{"type":"null"}]}},"type":"object","title":"PartialCollectionInfo"},"PartialEmbeddingModel":{"properties":{"id":{"anyOf":[{"type":"integer"},{"type":"string"},{"type":"string","format":"uuid"},{"type":"null"}],"title":"Id"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Version"},"library":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Library"},"loaded":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Loaded"},"eb_model":{"anyOf":[{},{"type":"null"}],"title":"Eb Model"},"tokenizer":{"anyOf":[{},{"type":"null"}],"title":"Tokenizer"}},"type":"object","title":"PartialEmbeddingModel"},"QdrantCollectionInfo":{"properties":{"id":{"anyOf":[{"type":"integer"},{"type":"string"},{"type":"string","format":"uuid"},{"type":"null"}],"title":"Id"},"name":{"type":"string","title":"Name"},"embedding_model":{"$ref":"#/components/schemas/EmbeddingModel"},"collection_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Collection Id"},"metadata":{"$ref":"#/components/schemas/QdrantCollectionMetadata"},"owner":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Owner"},"collection_type":{"allOf":[{"$ref":"#/components/schemas/CollectionType"}],"default":"qdrant"},"status":{"allOf":[{"$ref":"#/components/schemas/CollectionStatus"}],"default":"undefined"}},"type":"object","required":["name","embedding_model","metadata"],"title":"QdrantCollectionInfo"},"QdrantCollectionMetadata":{"properties":{"host":{"type":"string","title":"Host"},"token":{"type":"string","title":"Token"},"distance_method":{"allOf":[{"$ref":"#/components/schemas/DistanceMethod"}],"default":"Dot"},"dimension":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Dimension"}},"type":"object","required":["host","token"],"title":"QdrantCollectionMetadata"},"QdrantCredentialsInvalid":{"properties":{"detail":{"type":"string","title":"Detail","default":"Qdrant credentials invalid"}},"type":"object","title":"QdrantCredentialsInvalid"},"QueryRequest":{"properties":{"query":{"type":"string","title":"Query"},"top_k":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Top K","default":10}},"type":"object","required":["query"],"title":"QueryRequest"},"ReadRootResponse":{"properties":{"status":{"type":"string","title":"Status","default":"ok"}},"type":"object","title":"ReadRootResponse"},"UnsupportedCollectionTypeResponse":{"properties":{"detail":{"type":"string","title":"Detail","default":"Unsupported collection type"}},"type":"object","title":"UnsupportedCollectionTypeResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBasic":{"type":"http","scheme":"basic"}}}}